name: Deploy to GitHub Pages

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Deploy files to main
      run: |
        FOLDER_TO_DEPLOY="./build/web-mobile"

        if [ -d "$FOLDER_TO_DEPLOY" ]; then
          echo "‚úÖ Deploying files from $FOLDER_TO_DEPLOY"

          cp -r $FOLDER_TO_DEPLOY/* .

          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"

          git remote set-url origin https://x-access-token:${{ secrets.MY_SECRET }}@github.com/${{ github.repository }}.git

          git add .
          git commit -m "üöÄ Deploy to GitHub Pages" || echo "No changes to commit"
          git push origin main
        else
          echo "‚ùå Error: Folder $FOLDER_TO_DEPLOY does not exist!"
          exit 1
        fi
